<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - AI Tribes</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/styles.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-4">
        <div class="col-md-12">
            <div class="card shadow">
                <div class="card-body p-4">
                    <h2>My Profile</h2>
                    <form id="profileForm" class="needs-validation" novalidate>
                        <div class="row">
                            <div class="col-md-3 text-center mb-4">
                                <div class="position-relative d-inline-block">
                                    <img src="assets/default-avatar.png" class="rounded-circle img-thumbnail mb-3" 
                                        style="width: 150px; height: 150px; object-fit: cover;" id="profileImage">
                                    <label for="imageUpload" class="btn btn-sm btn-primary position-absolute" 
                                        style="bottom: 15px; right: 15px; width: 32px; height: 32px; border-radius: 50%; 
                                        display: flex; align-items: center; justify-content: center; 
                                        background: rgba(13, 110, 253, 0.9); border: 2px solid white;">
                                        <i class="fas fa-camera"></i>
                                    </label>
                                    <input type="file" id="imageUpload" class="d-none" accept="image/*">
                                </div>
                            </div>
                            
                            <div class="col-md-9">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Display Name</label>
                                        <input type="text" class="form-control" id="displayName" required>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <label class="form-label">Username</label>
                                        <div class="input-group">
                                            <span class="input-group-text">@</span>
                                            <input type="text" class="form-control" id="username" required>
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <label class="form-label">Bio</label>
                                        <textarea class="form-control" id="bio" rows="3"></textarea>
                                    </div>

                                    <div class="col-md-6">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" required>
                                    </div>

                                    <div class="col-md-6">
                                        <label class="form-label">Location</label>
                                        <input type="text" class="form-control" id="location">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <div class="row g-3">
                            <div class="col-12">
                                <h5>Social Links</h5>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label"><i class="fab fa-twitter me-2"></i>X (Twitter)</label>
                                <input type="text" class="form-control" id="twitter">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label"><i class="fab fa-github me-2"></i>GitHub</label>
                                <input type="text" class="form-control" id="github">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label"><i class="fab fa-discord me-2"></i>Discord</label>
                                <input type="text" class="form-control" id="discord">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label"><i class="fab fa-telegram me-2"></i>Telegram</label>
                                <input type="text" class="form-control" id="telegram">
                            </div>
                        </div>

                        <hr class="my-4">

                        <div class="row g-3">
                            <div class="col-12">
                                <h5>Wallet & Payments</h5>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="fab fa-ethereum me-2"></i>ETH Address
                                    <small class="text-muted">(or ENS name)</small>
                                </label>
                                <input type="text" class="form-control" id="ethAddress" placeholder="0x... or name.eth">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">
                                    <img src="assets/wallets/phantom.svg" class="me-2" style="width: 16px;">Solana Address
                                    <small class="text-muted">(or .SOL domain)</small>
                                </label>
                                <input type="text" class="form-control" id="solAddress" placeholder="Address or name.sol">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">
                                    <img src="assets/wallets/handcash.svg" class="me-2" style="width: 16px;">HandCash Handle
                                    <small class="text-muted">(for instant payments)</small>
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="text" class="form-control" id="handcashHandle" placeholder="yourhandle">
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <div class="row g-3">
                            <div class="col-12">
                                <h5>Identity Verification <span class="badge bg-secondary ms-2">Optional</span></h5>
                                <p class="text-muted small">Enable regulated token issuance by verifying your identity</p>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Government ID</label>
                                <div class="input-group">
                                    <input type="file" class="form-control" id="govId" accept="image/*,.pdf">
                                    <button class="btn btn-outline-secondary" type="button" id="uploadGovId">
                                        <i class="fas fa-upload"></i>
                                    </button>
                                </div>
                                <div class="form-text">Document hash will be attached to regulated token issuance</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Proof of Address</label>
                                <div class="input-group">
                                    <input type="file" class="form-control" id="proofAddress" accept="image/*,.pdf">
                                    <button class="btn btn-outline-secondary" type="button" id="uploadProofAddress">
                                        <i class="fas fa-upload"></i>
                                    </button>
                                </div>
                                <div class="form-text">Required for regulated token issuance in some jurisdictions</div>
                            </div>
                            <div class="col-12">
                                <div class="alert alert-info d-flex align-items-center" role="alert">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <div>
                                        Your identity documents will be hashed and can be attached to token issuance for regulatory compliance. Choose between regulated or unregulated token distribution. Documents are encrypted and stored securely.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-end mt-4">
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                                <button type="button" class="btn btn-outline-secondary" onclick="window.parent.location.reload()">Back to Dashboard</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const profileForm = document.getElementById('profileForm');
            const profileImage = document.getElementById('profileImage');
            const imageUpload = document.getElementById('imageUpload');

            // Handle profile image upload
            imageUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        profileImage.src = e.target.result;
                    }
                    reader.readAsDataURL(file);
                }
            });

            // Handle form submission
            profileForm.addEventListener('submit', async function(e) {
                e.preventDefault();

                // Show loading state
                const submitButton = this.querySelector('button[type="submit"]');
                const originalText = submitButton.innerHTML;
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Saving...';
                submitButton.disabled = true;

                try {
                    // Collect form data
                    const formData = {
                        displayName: document.getElementById('displayName').value,
                        username: document.getElementById('username').value,
                        bio: document.getElementById('bio').value,
                        email: document.getElementById('email').value,
                        location: document.getElementById('location').value,
                        social: {
                            twitter: document.getElementById('twitter').value,
                            github: document.getElementById('github').value,
                            discord: document.getElementById('discord').value,
                            telegram: document.getElementById('telegram').value
                        },
                        wallets: {
                            eth: document.getElementById('ethAddress').value,
                            sol: document.getElementById('solAddress').value,
                            handcash: document.getElementById('handcashHandle').value
                        }
                    };

                    // TODO: Replace with your actual API endpoint
                    // const response = await fetch('/api/profile/update', {
                    //     method: 'POST',
                    //     headers: {
                    //         'Content-Type': 'application/json',
                    //     },
                    //     body: JSON.stringify(formData)
                    // });

                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));

                    // Show success message
                    const toast = document.createElement('div');
                    toast.className = 'position-fixed bottom-0 end-0 p-3';
                    toast.style.zIndex = '11';
                    toast.innerHTML = `
                        <div class="toast show align-items-center text-white bg-success border-0" role="alert">
                            <div class="d-flex">
                                <div class="toast-body">
                                    <i class="fas fa-check-circle me-2"></i>Profile updated successfully!
                                </div>
                                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(toast);
                    setTimeout(() => toast.remove(), 3000);

                } catch (error) {
                    console.error('Error saving profile:', error);
                    // Show error message
                    const toast = document.createElement('div');
                    toast.className = 'position-fixed bottom-0 end-0 p-3';
                    toast.style.zIndex = '11';
                    toast.innerHTML = `
                        <div class="toast show align-items-center text-white bg-danger border-0" role="alert">
                            <div class="d-flex">
                                <div class="toast-body">
                                    <i class="fas fa-exclamation-circle me-2"></i>Error saving profile. Please try again.
                                </div>
                                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(toast);
                    setTimeout(() => toast.remove(), 3000);
                } finally {
                    // Restore button state
                    submitButton.innerHTML = originalText;
                    submitButton.disabled = false;
                }
            });
        });
    </script>
</body>
</html> 